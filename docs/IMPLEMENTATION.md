# Implementation Plan

Central document for `tinywasm/form`.

## Goal
Minimalist, WASM-optimized form library using `tinywasm/dom`.

**Principles:**
1. **Minimal API**: `New`, `RegisterInput`. See [API.md](API.md).
2. **Global Registry**: Forms auto-register in [registry.go](../registry.go).
3. **Struct-Based**: Forms derived from Go structs with [Tag support](TAGS.md).
4. **Performance**: Flat slices over maps, zero-allocation lookups where possible.
5. **Dual Render Mode**: Optimized WASM/fetch vs standard SSR.

## Documentation
- [API Specification](API.md) - **Source of truth for types**.
- [Design & Architecture](DESIGN.md)
- [Interactivity Strategy](INTERACTIVITY_AND_MOUNTING.md)
- [Input Types](../input/README.md)

## Architecture

### Render Modes
| Mode | SetSSR | Renders |
|------|------------|---------|
| **WASM/Fetch** | `false` (default) | id, class, inputs only |
| **SSR** | `true` | + method, action, submit |

Default endpoint: `/structname` (lowercase).

### Form Logic
Forms are generated by reflecting on struct fields. 
1. Matches each field to registered inputs via aliases and names.
2. Binds values from struct to inputs on creation.
3. [WASM] Binds events via event delegation.
4. [WASM] Syncs values back to struct on submit or change.

## Event Handling & Interactivity
Uses a **centralized event listener** at the Form level to minimize WASM size. 
See [mount.go](../mount.go) and [INTERACTIVITY_AND_MOUNTING.md](INTERACTIVITY_AND_MOUNTING.md).

## Validation
Whitelisting via `Permitted` struct. `Form.Validate()` iterates all inputs using `ValidateField()`.
